### Описание проекта

"Insurance Management System" – это веб-приложение для управления страховыми полисами и происшествиями. Пользователи могут зарегистрироваться, стать клиентами и оформлять страховые полисы или сообщать о происшествиях. Агент проверяет и принимает решения по заявкам пользователей.

---

### Основные компоненты

1. **inshurance** – Backend на Flask
2. **client** – Frontend на Flask с Bootstrap для интерфейса
3. **PostgreSQL** – База данных

---

### Основные роли

- **Пользователь**: Регистрация, ввод данных, запросы на полисы и происшествия.
- **Агент**: Проверка заявок на полисы и происшествия, одобрение/отклонение заявок.
- **Админ**: Управление базой данных, создание аккаунтов для Агентов

---

### Функциональные возможности

- **Регистрация** пользователей и вход в систему.
- **Оформление полисов** и **происшествий** после проверки агентом.
- **Админ-панель** для выполнения SQL-запросов и управления таблицами через GUI.

---

### Используемые технологии

- **Flask** – Backend и Frontend
- **PostgreSQL** – Реляционная база данных
- **JWT** – Аутентификация
- **Bootstrap 5** – UI

---

### Запуск проекта

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Настройте базу данных PostgreSQL в `settings.json`.

3. Запустите приложение (в разных консолях):
   ```bash
   python Inshurance/wsgi.py
   python client/main.py
   docker-compose start
   ```

---

### API Роуты

- **/api/register** – Регистрация 
- **/api/login** – Авторизация 
- **/api/profile** – Профиль пользователя
- **/api/become_client** – Стать клиентом 
- **/api/change_password** – Смена пароля

---

### Админ-панель

1. **SQL запросы** – Возможность выполнения произвольных SQL запросов через интерфейс на сайте.
2. **Управление таблицами через GUI** – Визуальная работа с таблицами базы данных, аналогичная "DataBase Client JDBC" в VSCode.

---

### Структура базы данных

#### Таблица `Users`

| Поле          | Тип данных     | Описание                       |
|---------------|----------------|--------------------------------|
| user_id       | SERIAL (PK)     | Уникальный идентификатор       |
| user_login    | VARCHAR(255)    | Логин пользователя             |
| password_hash | VARCHAR(255)    | Хэш пароля                     |
| user_role     | VARCHAR(255)    | Роль пользователя (по умолчанию 'guest') |

#### Таблица `Clients`

| Поле            | Тип данных     | Описание                     |
|-----------------|----------------|------------------------------|
| client_id       | SERIAL (PK)     | Уникальный идентификатор     |
| birth_day       | DATE            | Дата рождения                |
| client_name     | VARCHAR(255)    | Имя клиента                  |
| passport_series | INTEGER         | Серия паспорта               |
| passport_number | INTEGER         | Номер паспорта               |
| contact_number  | VARCHAR(20)     | Контактный телефон           |
| address         | VARCHAR(255)    | Адрес проживания             |
| user_id         | INTEGER (FK)    | Связь с пользователем        |

#### Таблица `Policies`

| Поле            | Тип данных     | Описание                     |
|-----------------|----------------|------------------------------|
| policy_id       | SERIAL (PK)     | Уникальный идентификатор     |
| policy_type     | VARCHAR(255)    | Тип полиса                   |
| agent_id        | INTEGER (FK)    | Агент, который оформил       |
| client_id       | INTEGER (FK)    | Клиент, которому оформлен    |
| date_start      | DATE            | Дата начала полиса           |
| date_stop       | DATE            | Дата окончания полиса        |
| sum_insurance   | INTEGER         | Сумма страхования            |
| status          | VARCHAR(255)    | Статус полиса                |

#### Таблица `Cases`

| Поле            | Тип данных     | Описание                     |
|-----------------|----------------|------------------------------|
| case_id         | SERIAL (PK)     | Уникальный идентификатор     |
| policy_id       | INTEGER (FK)    | Связь с полисом              |
| agent_id        | INTEGER (FK)    | Агент, проверяющий случай    |
| date            | DATE            | Дата происшествия            |
| description     | TEXT            | Описание происшествия        |
| status          | VARCHAR(255)    | Статус проверки              |
| sum             | INTEGER         | Сумма возмещения             |

--- 

### Дополнительно

- Для тестирования API использовался Postman.
- В проекте реализована JWT аутентификация для защиты маршрутов. Токен передается в заголовке запроса (`Authorization: token`).